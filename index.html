<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/logo.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DemoStoke - Demo gear before you buy!</title>
    <meta name="description" content="Find it. Ride it. Love it? Buy it." />
    <meta name="author" content="DemoStoke" />
    
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://images.unsplash.com" />
    <link rel="preconnect" href="https://qtlhqsqanbxgfbcjigrl.supabase.co" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/img/demostoke-logo-ds-transparent-cropped.webp" as="image" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://demostoke.com/" />
    <meta property="og:title" content="DemoStoke - Demo gear before you buy!" />
    <meta property="og:description" content="Find it. Ride it. Love it? Buy it." />
    <meta property="og:image" content="https://demostoke.com/img/demostoke-square-transparent.webp" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://demostoke.com/" />
    <meta property="twitter:title" content="DemoStoke - Demo gear before you buy!" />
    <meta property="twitter:description" content="Find it. Ride it. Love it? Buy it." />
    <meta property="twitter:image" content="https://demostoke.com/img/demostoke-square-transparent.webp" />

    <!-- Pre-hydration theme resolver & transition guard -->
    <style>
      /* Prevent theme flash on load */
      html {
        transition: none !important;
      }
      .theme-transition {
        transition: background-color 0.3s ease, color 0.3s ease;
      }
      /* Improve button accessibility */
      button:focus-visible,
      [role="button"]:focus-visible {
        outline: 2px solid hsl(var(--ring));
        outline-offset: 2px;
      }
      /* Prevent theme transitions during initial paint */
      html.theme-resolving *, html.theme-resolving *::before, html.theme-resolving *::after {
        transition: none !important;
        animation: none !important;
      }
    </style>
  <!-- Optional module script: expose Vite env to the IIFE so consumers can disable the fix at build time -->
  <script type="module">
    try {
      // import.meta.env is only available in module scripts. Treat the string 'false' as explicit false.
      window.__ENABLE_THEME_FLICKER_FIX = import.meta.env.VITE_ENABLE_THEME_FLICKER_FIX !== 'false';
    } catch {}
  </script>

  <script>
    (function () {
      try {
        var meta = document.querySelector('meta[name="enable-theme-flicker-fix"]');
        if (meta && meta.content === 'false') return;
      } catch {}
      if (window.__ENABLE_THEME_FLICKER_FIX === false) return;
      try {
        // mark that theme resolution is in progress
        document.documentElement.classList.add('theme-resolving');
      } catch {}
      try {
        var KEY = 'ui-theme';
        var val = null;
        try { val = localStorage.getItem(KEY); } catch { val = null; }
        // fallback to cookie if localStorage is blocked
        if (!val) {
          try {
            var m = document.cookie.match('(?:^|; )' + KEY + '=([^;]*)');
            if (m) val = decodeURIComponent(m[1]);
          } catch {}
        }
        if (!val) val = 'system';
        if (!/^(light|dark|system)$/.test(val)) val = 'system';
        var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        var theme = val === 'system' ? (prefersDark ? 'dark' : 'light') : val;
        var de = document.documentElement;
        de.classList.remove('light', 'dark');
        de.classList.add(theme);
        if (val === 'system') de.classList.add('system'); else de.classList.remove('system');
      } catch {
        try {
          var de2 = document.documentElement;
          var prefersDark2 = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
          de2.classList.add(prefersDark2 ? 'dark' : 'light');
        } catch {}
      } finally {
        try { document.documentElement.classList.remove('theme-resolving'); } catch {}
      }
    })();
  </script>

  <!-- Google Tag Manager -->
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-MHM2XTTV');</script>
  <!-- End Google Tag Manager -->

  <!-- Amplitude Analytics & Session Replay -->
  <script src="https://cdn.amplitude.com/script/f8e22b9e6a107073fe8cb51424e63488.js"></script>
  <script>window.amplitude.add(window.sessionReplay.plugin({ sampleRate: 1 }));
    window.amplitude.init('f8e22b9e6a107073fe8cb51424e63488', { "fetchRemoteConfig": true, "autocapture": true });
  </script>
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MHM2XTTV" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div id="root"><!--app-html--></div>

  <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
  <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
  <script type="module" src="/src/entry-client.tsx"></script>
</body>

</html>
